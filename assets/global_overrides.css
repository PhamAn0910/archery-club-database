/* global_overrides.css
   Centralized Streamlit overrides that map Streamlit widget selectors
   to the project's design tokens (colors, spacing, radii, fonts).

   Keep rules defensive (use element selectors and data-testid where
   available) to reduce coupling to internal Streamlit class names.
*/

/* Base typography and tokens */
:root {
  --ui-font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --ui-font-size: 16px;
  --ui-radius: var(--radius, 0.625rem);
  --primary-error-color: #666;
}

html, body, .stApp, label p {
  font-family: var(--ui-font-family);
  font-size: var(--ui-font-size);
  color: var(--color-foreground, #111);
  background: var(--color-background, #fff);
}

[data-baseweb="select"] > div > div, 
[data-baseweb="select"] > div > div > svg {
  background: #f9f9f9;
  color: #6b6b6b;
}
[data-testid="stSelectboxVirtualDropdown"] > div > div > li {
  color: #111;
  background: #f5f5f5;
}
[data-testid="stSelectboxVirtualDropdown"] > div > div > li:hover {
  background: #d9d9d9;
}
[data-baseweb="select"] > div {
  border: 1.8px solid #e1e1e1;
}

[data-baseweb="tag"] {
  background: #f1f1f1;
  color: #111;
}

[data-baseweb="popover"] > div > div > ul {
  background-color: #f6f6f6;
  color: #111;
}

[data-testid="stSelectboxVirtualDropdownEmpty"] > li {
  color: #bbbbbc;
}

[data-testid="stMetricValue"] > div {
  color: #111;
}

[data-baseweb="base-input"] > input {
  background: #f9f9f9;
  color: #111;
}
[data-testid="stTextInputRootElement"] {
  border: 1.8px solid #e1e1e1;
}

svg {
 stroke: #888888 !important;
}

[data-baseweb="tooltip"] > div > div {
  background-color: #f6f8f8;
  color: #aaaaaa;
  border: 2px solid #f6f8f8;
  border-radius: calc(var(--ui-radius) - 4px);
  font-style: italic;
}

[data-testid="stFormSubmitButton"] > button {
  border-radius: calc(var(--ui-radius));
  padding: 0.5rem 0.75rem;
  background: var(--color-primary, #f8f8f8);
  color: var(--color-primary-foreground, #111);
  box-shadow: none;
}

[data-testid="stFormSubmitButton"] > button:hover {
  background: var(--color-primary, #e9e9e9);
}

/* Headings inside Streamlit markdown should inherit tokens */
.stMarkdown h1, .stMarkdown h2, .stMarkdown h3, .stMarkdown h4 {
  color: var(--color-foreground, #111);
  font-weight: 600;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

/* Buttons: map primary/secondary look using tokens
   COMPLETELY EXCLUDE sidebar - target only main content area */
main .stButton > button,
.stApp > div:not([data-testid="stSidebar"]) .stButton > button,
div[data-testid="stAppViewContainer"] .stButton > button {
  border-radius: calc(var(--ui-radius));
  padding: 0.5rem 0.75rem;
  background: var(--color-primary, #f8f8f8);
  color: var(--color-primary-foreground, #111);
  box-shadow: none;
  border: 2px solid transparent;
}

main .stButton > button:hover,
.stApp > div:not([data-testid="stSidebar"]) .stButton > button:hover,
div[data-testid="stAppViewContainer"] .stButton > button:hover {
  background: var(--color-primary-hover, #e9e9e9);
}

main .stButton > button:active,
.stApp > div:not([data-testid="stSidebar"]) .stButton > button:active,
div[data-testid="stAppViewContainer"] .stButton > button:active {
  background: #e8e8e9;
}

main .stButton > button.always-active,
.stApp > div:not([data-testid="stSidebar"]) .stButton > button.always-active,
div[data-testid="stAppViewContainer"] .stButton > button.always-active {
  background: #e8e8e9;
}

/* Checkbox styling for hover, active, and always-active states
   EXCLUDE sidebar completely */
main .stCheckbox,
.stApp > div:not([data-testid="stSidebar"]) .stCheckbox,
div[data-testid="stAppViewContainer"] .stCheckbox {
  border-radius: calc(var(--ui-radius) - 4px);
  transition: background-color 0.2s ease;
}

main .stCheckbox:hover,
.stApp > div:not([data-testid="stSidebar"]) .stCheckbox:hover,
div[data-testid="stAppViewContainer"] .stCheckbox:hover {
  background: var(--color-primary-hover, #f3f3f5);
}

main .stCheckbox input:checked ~ label,
.stApp > div:not([data-testid="stSidebar"]) .stCheckbox input:checked ~ label,
div[data-testid="stAppViewContainer"] .stCheckbox input:checked ~ label {
  background: #e8e8e9;
}

main .stCheckbox.always-active,
.stApp > div:not([data-testid="stSidebar"]) .stCheckbox.always-active,
div[data-testid="stAppViewContainer"] .stCheckbox.always-active {
  background: #e8e8e9;
}

/* Multi-select tags: allow text wrapping for long tags */
.stMultiSelect [data-baseweb="tag"] {
  height: fit-content; /* Allows the tag to expand vertically */
}
.stMultiSelect [data-baseweb="tag"] span[title] {
    white-space: normal; /* Allows text to wrap */
    max-width: 100%; /* Ensures text stays within the tag width */
    overflow-wrap: anywhere; /* Breaks long words if necessary */
}

/* Secondary-looking buttons
   EXCLUDE sidebar completely */
main .stButton[role] > button[aria-pressed="false"],
.stApp > div:not([data-testid="stSidebar"]) .stButton[role] > button[aria-pressed="false"],
div[data-testid="stAppViewContainer"] .stButton[role] > button[aria-pressed="false"] {
  background: transparent;
}

/* Inputs: text, number, textarea */
textarea, select, input[type="number"] {
/* do NOT include the input[type="number"] here, 
if want the st.number_input use Streamlit default theme 
when toggling OS-level dark and light modes */ 
  background: var(--color-input-background, #f3f3f5);
  color: var(--color-foreground, #111);
  border: 1px solid var(--color-border, rgba(0,0,0,0.08));
  border: 1px solid;
  padding: 8px 10px;
  border-radius: calc(var(--ui-radius) - 4px);
}

/* Form labels and small text */
.stForm label, .stText, .stCaption {
  color: var(--color-muted-foreground, #6b6b6b);
}

/* Tables and dataframes */
.stDataFrame table, table {
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
  border-radius: calc(var(--ui-radius));
  overflow: hidden;
}
/* .stDataFrame thead th {
  background: var(--color-accent, #f3f3f5);
  color: var(--color-accent-foreground, #000);
} */

/* Cards used in preview/content */
.preview-card, .card, .stBlock {
  /* background: var(--color-card, #fff); */
  color: var(--color-card-foreground, #000);
  border-radius: calc(var(--ui-radius));
  padding: 12px;
  /* box-shadow: 0 1px 4px rgba(2,6,23,0.06); */
}

/* Sidebar spacing (scoped) */
[data-testid="stSidebar"] {
  gap: 8px;
}

/* Small utilities */
.muted { color: var(--color-muted-foreground, #6b6b6b); }

/* Info / alert boxes generated by Streamlit (st.info, st.warning, etc.)
   Use defensive selectors; Streamlit uses a few internal classes so we
   include commonly-seen names and a generic fallback for elements with
   role="status". These rules map to the project's accent tokens. */
.stAlert, .stInfo, .stWarning, .stSuccess, .stError,
[role="status"] {
  /* background: var(--color-accent, #f3f3f5);
  color: var(--color-accent-foreground, #000); */
  padding: 10px 12px;
  border-radius: calc(var(--ui-radius));
  border-left: 4px solid var(--color-primary, #030213);
}

/* Metrics: adapt Streamlit metric/card look to tokens. Streamlit marks
   metric values with a few internal structures; we style both common
   class names and generic descendants to be robust. */
.stMetric, .stMetricValue, .stMetricDelta,
.stMetric > div, .stMetricValue > div {
  font-family: var(--ui-font-family);
  /* color: var(--color-primary, #030213); */
}

/* Selectbox / dropdown fallbacks: Streamlit sometimes uses native select
   elements or custom divs â€” we style both. */
select, .stSelectbox select, .stSelectbox div[role="combobox"] {
  background: var(--color-input-background, #f3f3f5);
  border: 1px solid var(--color-border, rgba(0,0,0,0.08));
  padding: 8px 10px;
  border-radius: calc(var(--ui-radius) - 4px);
  /* color: var(--color-foreground, #111); */
}

/* Tabs: make Streamlit tabs align with tokens */
.stTabs, .stTabs button, .stTabs [role="tab"] {
  font-family: var(--ui-font-family);
  /* color: var(--color-foreground, #111); */
}
.stTabs [role="tab"][aria-selected="true"] {
  background: var(--color-secondary, #f0f0f0);
  /* color: var(--color-secondary-foreground, #000); */
  border-radius: calc(var(--ui-radius));
}

/* Small media & layout helpers to keep spacing consistent */
.stColumns, .stColumn, .st-col, .stBlock, .stContainer {
  gap: 12px;
}

/* Success messages: always use green theme/palette */
/* .stSuccess, [data-testid="stSuccess"], [data-testid="stNotification"][data-baseweb="notification"][kind="success"] {
  background-color: rgba(34, 197, 94, 0.1) !important;
  border-left-color: rgb(34, 197, 94) !important;
  color: rgb(21, 128, 61) !important;
}

.stSuccess [data-testid="stMarkdownContainer"] p,
[data-testid="stSuccess"] [data-testid="stMarkdownContainer"] p {
  color: rgb(21, 128, 61) !important;
} */

/* Dataframe/table tweaks (more readable rows & header tokens) */
table, .stDataFrame table {
  font-family: var(--ui-font-family);
  font-size: 14px;
}
table thead th {
  background: var(--color-accent, #f3f3f5) !important;
  /* color: var(--color-accent-foreground, #000) !important; */
  font-weight: 600;
}

